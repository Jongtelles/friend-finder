<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Friend Finder</title>
    <link href="https://fonts.googleapis.com/css?family=Rammetto+One" rel="stylesheet">
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css' integrity='sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm'
        crossorigin='anonymous'>
    <link rel="stylesheet" type="text/css" href="./css/style.css">
</head>

<body>
    <!-- Bootstrap Container -->
    <div class='container-fluid'>
        <h2>Survey Questions</h2>
        <hr>
        <h3>About You</h3>
        <h4>Name (Required)</h4>
        <input type='text' id='name' class='verify' required>
        <h4>Link to Photo Image (Required)</h4>
        <input type='text' id='photo' class='verify' required>
        <hr>
        <h3>
            <strong>Question 1</strong>
        </h3>
        <h4>One who deceives will always find those who allow themselves to be deceived.</h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q1' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <span class="selection">Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q1'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>
        <h3>
            <strong> Question 2</strong>
        </h3>
        <h4>Surprise is the greatest gift which life can grant us.</h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q2' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <span class="selection"> Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q2'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>
        <h3>
            <strong> Question 3</strong>
        </h3>
        <h4>Fortune favors the prepared mind.</h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q3' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <span class="selection"> Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q3'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>
        <h3>
            <strong> Question 4</strong>
        </h3>
        <h4>Those who make peaceful revolution impossible will make violent revolution inevitable.</h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q4' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <span class="selection"> Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q4'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>
        <h3>
            <strong> Question 5</strong>
        </h3>
        <h4>We are what we pretend to be, so we must be careful about what we pretend to be.</h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q5' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <span class="selection"> Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q5'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>
        <h3>
            <strong> Question 6</strong>
        </h3>
        <h4>Travel is fatal to prejudice, bigotry, and narrow-mindedness.</h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q6' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <span class="selection"> Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q6'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>
        <h3>
            <strong> Question 7</strong>
        </h3>
        <h4>If knowledge can create problems, it is not through ignorance that we can solve them.</h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q7' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <span class="selection"> Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q7'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>
        <h3>
            <strong> Question 8</strong>
        </h3>
        <h4>Nothing in life is to be feared; it is only to be understood. Now is the time to understand more so that we may fear
            less.
        </h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q8' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <span class="selection"> Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q8'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>
        <h3>
            <strong> Question 9</strong>
        </h3>
        <h4>You can't be brave if you've only had wonderful things happen to you.</h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q9' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <span class="selection"> Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q9'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>
        <h3>
            <strong> Question 10</strong>
        </h3>
        <h4>I want to stay as close to the edge as I can without going over. Out on the edge you see all kinds of things you
            can't see from the center.</h4>
        <div class='dropdown'>
            <button class='btn btn-survey dropdown-toggle verify' type='button' id='q10' data-toggle='dropdown' aria-haspopup='true'
                aria-expanded='false'>
                <span class="selection"> Select an option</span>
            </button>
            <div class='dropdown-menu' aria-labelledby='q10'>
                <button class='dropdown-item' type='button' value=1>1 (Strongly disagree)</button>
                <button class='dropdown-item' type='button' value=2>2</button>
                <button class='dropdown-item' type='button' value=3>3</button>
                <button class='dropdown-item' type='button' value=4>4</button>
                <button class='dropdown-item' type='button' value=5>5 (Strongly agree)</button>
            </div>
        </div>

        <button id='survey-submit' type='submit' class='btn-lg btn-block btn-survey mt-4'>
            <span class='btn-txt'>Submit</span>
        </button>

        <!-- Modal -->
        <div id="modal" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Best Friend</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h2 id="friendName"></h2>
                        <img id="friendImg" src="" alt="">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <a href="/api/friends"> API Friends List</a>
                |
                <a href="https://github.com/Jongtelles/friend-finder"> Github Repo</a>
            </div>
        </footer>
        <!-- End Bootstrap Container -->
    </div>

    <!-- Javscript -->
    <!-- jQuery -->
    <script src='https://code.jquery.com/jquery-3.3.1.min.js' integrity='sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8='
        crossorigin='anonymous'>
    </script>
    <!-- Boostrap JS -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js' integrity='sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q'
        crossorigin='anonymous'></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js' integrity='sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl'
        crossorigin='anonymous'></script>
    <!-- custom JS -->
    <script>
        $('.dropdown-menu button').click(function () {
            var selectText = $(this).text();
            var selectVal = $(this).val();
            $(this).parents(".dropdown").find('.selection').text(selectText);
            $(this).parents(".dropdown").find('.btn').val(selectVal);
        });
        const sendInfo = (info) => {
            $.ajax({
                url: '/api/friends',
                method: 'POST',
                dataType: 'json',
                data: info,
            }).done((data) => {
                console.log(data);
                $('#friendName').text(data.name);
                $('#friendImg').attr('src', data.photo);
                $('#friendImg').addClass('img-fluid');
                $('#modal').modal('toggle');
            })
        }
        $('#survey-submit').on('click', (event) => {
            event.preventDefault();

            function validater() {
                let valid = true;
                $('.verify').each(function () {
                    if ($(this).val() == "")
                        valid = false;
                })
                return valid;
            }
            if (validater() == true) {
                let newFriend = {
                    name: '',
                    photo: '',
                    scores: []
                }
                newFriend.name = $('#name').val();
                newFriend.photo = $('#photo').val();
                for (let i = 1; i <= 10; i++) {
                    let score = $(`#q${[i]}`).val();
                    score = parseInt(score);
                    newFriend.scores.push(score);
                }
                console.log(newFriend);
                sendInfo(newFriend);
            } else {
                alert('Please fill out all information before proceeding!');
            }
        });
    </script>
</body>

</html>